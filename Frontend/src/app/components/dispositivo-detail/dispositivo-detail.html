<div class="detalle-container" *ngIf="dispositivo">

    <!-- BotÃ³n volver -->
    <button class="btn-volver" (click)="goBack()">â¬… Volver</button>

    <div class="detalle-layout">

        <!-- GalerÃ­a -->
        <div class="galeria">
            <div class="imagen-principal">
                <img [src]="imagenSeleccionada || 'assets/no-image.png'" alt="{{ dispositivo?.modelo }}">
            </div>

            <div class="miniaturas">
                <img *ngFor="let img of imagenes" [src]="img.url" alt="Imagen dispositivo"
                    (click)="cambiarImagen(img.url)">
            </div>
        </div>

        <!-- InformaciÃ³n -->
        <div class="info">
            <h2 class="titulo">{{ dispositivo.marca }} {{ dispositivo.modelo }}</h2>
            <p class="tipo">{{ dispositivo.tipo }}</p>
            <p class="precio">$ {{ dispositivo.precio | number }}</p>

            <ul class="caracteristicas">
                <li><strong>Fecha lanzamiento:</strong> {{ dispositivo.fecha_lanzamiento | date }}</li>
                <li><strong>Especificaciones:</strong> {{ dispositivo.especificaciones }}</li>
            </ul>

            <button class="btn-comprar">ðŸ›’ Comprar ahora</button>
        </div>

    </div>

    <div class="comentarios">
        <h3>Comentarios</h3>

        <!-- Formulario -->
        <form class="form-comentario" (ngSubmit)="agregarComentario()" #comentarioForm="ngForm">
            <input type="text" name="nombre" [(ngModel)]="nuevoComentario.nombre" placeholder="Tu nombre" required>
            <textarea name="contenido" [(ngModel)]="nuevoComentario.contenido" placeholder="Escribe tu comentario..."
                rows="3" required>
            </textarea>
            <button type="submit" [disabled]="comentarioForm.invalid">ðŸ’¬ Enviar</button>
        </form>

        <!-- Lista de comentarios -->
        <div *ngIf="comentarios.length > 0; else noComments">
            <div *ngFor="let c of comentarios" class="comentario">
                <p class="texto">{{ c.contenido }}</p>
                <span class="meta">ðŸ’¬ {{ c.nombre }} Â· {{ c.fecha | date:'short' }}</span>
            </div>
        </div>

        <ng-template #noComments>
            <p class="sin-comentarios">No hay comentarios aÃºn. SÃ© el primero en opinar.</p>
        </ng-template>
    </div>

</div>